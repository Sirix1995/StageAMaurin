<?xml version = "1.0" encoding="UTF-8"?>
<plugin 
 id="de.grogra.imp3d"
 version="1.6"
	class="de.grogra.imp3d.IMP3D" xmlns="http://grogra.de/registry">

	<library file="gluegen-rt.jar" prefixes="{com.sun.gluegen.runtime}"/>
  	<library file="jogl.jar" prefixes="{com.sun.opengl,javax.media}"/>
	<library file="IMP-3D.jar" prefixes="{de.grogra.imp3d}" />

	<import plugin="de.grogra.imp" />
	<import plugin="de.grogra.ray" />
	<import plugin="de.grogra.xl.impl" />

	<registry>
		<ref name="attributes">
			<attribute name="csgOperation" />
			<attribute name="light" />
			<attribute name="areaLight" />
			<ref name="geometry">
				<ref name="shape">
					<attribute name="axis" />
					<attribute name="secondAxis" />
					<attribute name="open" />
					<attribute name="baseOpen" />
					<attribute name="topOpen" />
					<attribute name="supershape_a" />
					<attribute name="supershape_b" />
					<attribute name="supershape_m1" />
					<attribute name="supershape_n11" />
					<attribute name="supershape_n12" />
					<attribute name="supershape_n13" />
					<attribute name="supershape_m2" />
					<attribute name="supershape_n21" />
					<attribute name="supershape_n22" />
					<attribute name="supershape_n23" />
					<attribute name="lamella_a" />
					<attribute name="lamella_b" />
					<attribute name="radius"/>
					<attribute name="theta1"/>
					<attribute name="theta2"/>
					<attribute name="phi"/>
				</ref>
				<ref name="transformation">
					<attribute name="transform" />
					<attribute name="startPosition" />
					<attribute name="endPosition" />
					<attribute name="shiftPivot" />
				</ref>
			</ref>
			<attribute name="shader" />
			<attribute name="visibleSides" />
			<attribute name="cieNorms" />
			<attribute name="interior" />
		</ref>
		<ref name="objects">
			<ref name="math">
				<ref name="curves">
					<factory name="vertexseq"
						class="de.grogra.imp3d.objects.VertexSequence" />
				</ref>
				<ref name="curvelists">
					<factory name="curveseq"
						class="de.grogra.imp3d.objects.CurveSequence" />
					<factory name="sweepseq"
						class="de.grogra.imp3d.objects.SweepSequence" />
				</ref>
				<ref name="grids">
					<factory name="image"
						class="de.grogra.imp3d.objects.ImageHeightField" />
					<factory name="network"
						class="de.grogra.imp3d.objects.NetworkHeightField" />
				</ref>
			</ref>
			<ref name="maps">
					<factory name="blend"
						class="de.grogra.imp3d.shading.ChannelBlend">
						<config>
							<object name="blend" class="de.grogra.imp3d.shading.BlendItem">
							  <object class="de.grogra.math.RGBColor">
							    <float value="0"/>
							    <float value="0"/>
							    <float value="1"/>
							  </object>
							  <float value="-1"/>
							  <object class="de.grogra.imp3d.shading.BlendItem">
								  <object class="de.grogra.math.RGBColor">
								    <float value="1"/>
								    <float value="1"/>
								    <float value="1"/>
								  </object>
								  <float value="0"/>
								  <object class="de.grogra.imp3d.shading.BlendItem">
									  <object class="de.grogra.math.RGBColor">
									    <float value="0"/>
									    <float value="0"/>
									    <float value="0"/>
									  </object>
									  <float value="1"/>
									  <null/>
								  </object>
							  </object>
							</object>
						</config>
					</factory>
					<factory name="blenditem"
						class="de.grogra.imp3d.shading.BlendItem" />
					<factory name="smooth3d"
						class="de.grogra.imp3d.shading.Smooth3D" />
					<factory name="laplace3d"
						class="de.grogra.imp3d.shading.Laplace3D" />
					<eval name="nullblenditem"
						type="de.grogra.imp3d.shading.BlendItem" />
					<directory name="surface">
						<factory name="image"
							class="de.grogra.imp3d.shading.ImageMap" />
						<factory name="checker"
							class="de.grogra.imp3d.shading.Checker" />
						<factory name="carpenter"
							class="de.grogra.imp3d.shading.Carpenter" />
					</directory>
					<directory name="volume">
						<factory name="checker"
							class="de.grogra.imp3d.shading.VolumeChecker" />
						<factory name="granite"
							class="de.grogra.imp3d.shading.Granite" />
						<factory name="wrinkles" alias="true"
							type="de.grogra.imp3d.shading.VolumeTurbulence"
							expr="de.grogra.imp3d.shading.VolumeTurbulence.createWrinkles" />
						<factory name="turbulence"
							class="de.grogra.imp3d.shading.VolumeTurbulence" />
						<factory name="leopard"
							class="de.grogra.imp3d.shading.Leopard" />
						<factory name="mandel"
							class="de.grogra.imp3d.shading.Mandel" />
						<factory name="julia"
							class="de.grogra.imp3d.shading.Julia" />
						<factory name="wood"
							class="de.grogra.imp3d.shading.Wood" />
						<factory name="gradient"
							class="de.grogra.imp3d.shading.Gradient" />
					</directory>
					<directory name="geometry">
						<factory name="uv"
							class="de.grogra.imp3d.shading.AffineUVTransformation" />
						<factory name="xyz"
							class="de.grogra.imp3d.shading.XYZTransformation" />
						<factory name="turbulence"
							class="de.grogra.imp3d.shading.Turbulence" />
						<factory name="bump"
							class="de.grogra.imp3d.shading.BumpMap" />
						<factory name="wave"
							class="de.grogra.imp3d.shading.WaveMap" />
					</directory>
			</ref>
			<directory name="3d">
				<group name="geometry" i18nkey="geometry">
					<command name=".addobject"
						run="de.grogra.imp.IMP.addNode" />
					<group name="primitives" itemGroup="true">
						<object name="sphere"
							class="de.grogra.imp3d.objects.Sphere" />
						<object name="spheresegment"
							class="de.grogra.imp3d.objects.SphereSegment" />
						<object name="supershape"
							class="de.grogra.imp3d.objects.Supershape" />
						<object name="box"
							class="de.grogra.imp3d.objects.Box" />
						<object name="gpp"
							class="de.grogra.imp3d.objects.GPP" />
						<object name="gwedge"
							class="de.grogra.imp3d.objects.GWedge" />
						<object name="cylinder"
							class="de.grogra.imp3d.objects.Cylinder" />
						<object name="cone"
							class="de.grogra.imp3d.objects.Cone" />
						<object name="frustum"
							class="de.grogra.imp3d.objects.Frustum" />
						<object name="parallelogram"
							class="de.grogra.imp3d.objects.Parallelogram" />
						<object name="plane"
							class="de.grogra.imp3d.objects.Plane" />
						<object name="pointcloud"
							class="de.grogra.imp3d.objects.PointCloud" />
						<object name="textlabel"
							class="de.grogra.imp3d.objects.TextLabel" />
						<object name="textblock"
							class="de.grogra.imp3d.objects.TextBlock" />
						<object name="legend"
							class="de.grogra.imp3d.objects.Legend" />
					</group>
					<group name="nurbs" itemGroup="true">
						<object name="surface"
							class="de.grogra.imp3d.objects.NURBSSurface">
							<config>
								<object name="surface"
									class="de.grogra.math.SwungSurface">
									<config>
										<object name="profile"
											class="de.grogra.math.Circle" />
										<object name="trajectory"
											class="de.grogra.math.Circle" />
										<float name="shift" value="2" />
									</config>
								</object>
							</config>
						</object>
						<object name="curve"
							class="de.grogra.imp3d.objects.NURBSCurve">
							<config>
								<object name="curve"
									class="de.grogra.math.Helix" />
							</config>
						</object>
					</group>
					<group name="polygonal" itemGroup="true">
						<object name="patch"
							class="de.grogra.imp3d.objects.Patch">
							<config>
								<object name="grid"
									class="de.grogra.imp3d.objects.NetworkHeightField" />
							</config>
						</object>
						<object name="polygon"
							class="de.grogra.imp3d.objects.Polygon">
							<config>
								<object name="vertices"
									class="de.grogra.math.RegularPolygon" />
							</config>
						</object>
					</group>
					<group name="sceneobjects" itemGroup="true">
						<object name="light"
							class="de.grogra.imp3d.objects.LightNode" />
						<object name="sky"
							class="de.grogra.imp3d.objects.Sky" />
					</group>
				</group>
				<resdir name="shaders">
					<eval name="&quot;null&quot;"
						type="de.grogra.imp3d.shading.Shader" />
					<factory name="lambert" alias="true"
						class="de.grogra.imp3d.shading.Phong" />
					<factory name="phong"
						type="de.grogra.imp3d.shading.Phong"
						expr="de.grogra.imp3d.shading.Phong.createPhong" />
					<factory name="rgba"
						class="de.grogra.imp3d.shading.RGBAShader" />
					<factory name="sunsky"
						class="de.grogra.imp3d.shading.SunSkyLight" />
					<directory name="plain">
						<eval name="black"
							type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
							fetch="true">
							<object
								expr="de.grogra.imp3d.shading.RGBAShader.BLACK" />
						</eval>
						<eval name="blue"
							type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
							fetch="true">
							<object
								expr="de.grogra.imp3d.shading.RGBAShader.BLUE" />
						</eval>
						<eval name="cyan"
							type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
							fetch="true">
							<object
								expr="de.grogra.imp3d.shading.RGBAShader.CYAN" />
						</eval>
						<eval name="darkgray"
							type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
							fetch="true">
							<object
								expr="de.grogra.imp3d.shading.RGBAShader.DARK_GRAY" />
						</eval>
						<eval name="gray"
							type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
							fetch="true">
							<object
								expr="de.grogra.imp3d.shading.RGBAShader.GRAY" />
						</eval>
						<eval name="green"
							type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
							fetch="true">
							<object
								expr="de.grogra.imp3d.shading.RGBAShader.GREEN" />
						</eval>
						<eval name="lightgray"
							type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
							fetch="true">
							<object
								expr="de.grogra.imp3d.shading.RGBAShader.LIGHT_GRAY" />
						</eval>
						<eval name="magenta"
							type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
							fetch="true">
							<object
								expr="de.grogra.imp3d.shading.RGBAShader.MAGENTA" />
						</eval>
						<eval name="orange"
							type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
							fetch="true">
							<object
								expr="de.grogra.imp3d.shading.RGBAShader.ORANGE" />
						</eval>
						<eval name="pink"
							type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
							fetch="true">
							<object
								expr="de.grogra.imp3d.shading.RGBAShader.PINK" />
						</eval>
						<eval name="red"
							type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
							fetch="true">
							<object
								expr="de.grogra.imp3d.shading.RGBAShader.RED" />
						</eval>
						<eval name="yellow"
							type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
							fetch="true">
							<object
								expr="de.grogra.imp3d.shading.RGBAShader.YELLOW" />
						</eval>
						<eval name="white"
							type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
							fetch="true">
							<object
								expr="de.grogra.imp3d.shading.RGBAShader.WHITE" />
						</eval>
						<group name="ega">
							<eval name="0"
								type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
								fetch="true">
								<object
									expr="de.grogra.imp3d.shading.RGBAShader.EGA_0" />
							</eval>
							<eval name="1"
								type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
								fetch="true">
								<object
									expr="de.grogra.imp3d.shading.RGBAShader.EGA_1" />
							</eval>
							<eval name="2"
								type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
								fetch="true">
								<object
									expr="de.grogra.imp3d.shading.RGBAShader.EGA_2" />
							</eval>
							<eval name="3"
								type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
								fetch="true">
								<object
									expr="de.grogra.imp3d.shading.RGBAShader.EGA_3" />
							</eval>
							<eval name="4"
								type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
								fetch="true">
								<object
									expr="de.grogra.imp3d.shading.RGBAShader.EGA_4" />
							</eval>
							<eval name="5"
								type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
								fetch="true">
								<object
									expr="de.grogra.imp3d.shading.RGBAShader.EGA_5" />
							</eval>
							<eval name="6"
								type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
								fetch="true">
								<object
									expr="de.grogra.imp3d.shading.RGBAShader.EGA_6" />
							</eval>
							<eval name="7"
								type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
								fetch="true">
								<object
									expr="de.grogra.imp3d.shading.RGBAShader.EGA_7" />
							</eval>
							<eval name="8"
								type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
								fetch="true">
								<object
									expr="de.grogra.imp3d.shading.RGBAShader.EGA_8" />
							</eval>
							<eval name="9"
								type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
								fetch="true">
								<object
									expr="de.grogra.imp3d.shading.RGBAShader.EGA_9" />
							</eval>
							<eval name="10"
								type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
								fetch="true">
								<object
									expr="de.grogra.imp3d.shading.RGBAShader.EGA_10" />
							</eval>
							<eval name="11"
								type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
								fetch="true">
								<object
									expr="de.grogra.imp3d.shading.RGBAShader.EGA_11" />
							</eval>
							<eval name="12"
								type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
								fetch="true">
								<object
									expr="de.grogra.imp3d.shading.RGBAShader.EGA_12" />
							</eval>
							<eval name="13"
								type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
								fetch="true">
								<object
									expr="de.grogra.imp3d.shading.RGBAShader.EGA_13" />
							</eval>
							<eval name="14"
								type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
								fetch="true">
								<object
									expr="de.grogra.imp3d.shading.RGBAShader.EGA_14" />
							</eval>
							<eval name="15"
								type="de.grogra.imp3d.shading.RGBAShader" objDescribes="true"
								fetch="true">
								<object
									expr="de.grogra.imp3d.shading.RGBAShader.EGA_15" />
							</eval>
						</group>
					</directory>
					<factory name="sideswitch"
						class="de.grogra.imp3d.shading.SideSwitchShader" />
					<factory name="algorithmswitch"
						class="de.grogra.imp3d.shading.AlgorithmSwitchShader" />
				</resdir>
				<resdir name="interiors">
					<eval name="&quot;null&quot;"
						type="de.grogra.imp3d.shading.Interior" />
					<factory name="ior"
						class="de.grogra.imp3d.shading.IOR" />
				</resdir>
				<resdir name="cameras">
					<factory name="camera"
						class="de.grogra.imp3d.Camera"
						expr="de.grogra.imp3d.Camera.createPerspective" />
					<group name="fixed">
						<eval name="perspective"
							type="de.grogra.imp3d.Camera">
							<object
								expr="de.grogra.imp3d.Camera.createPerspective" />
						</eval>
						<eval name="parallel"
							type="de.grogra.imp3d.Camera">
							<object
								expr="de.grogra.imp3d.Camera.createParallel" />
						</eval>
						<eval name="top"
							type="de.grogra.imp3d.Camera">
							<object
								expr="de.grogra.imp3d.Camera.createTopView" />
						</eval>
						<eval name="bottom"
							type="de.grogra.imp3d.Camera">
							<object
								expr="de.grogra.imp3d.Camera.createBottomView" />
						</eval>
						<eval name="front"
							type="de.grogra.imp3d.Camera">
							<object
								expr="de.grogra.imp3d.Camera.createFrontView" />
						</eval>
						<eval name="back"
							type="de.grogra.imp3d.Camera">
							<object
								expr="de.grogra.imp3d.Camera.createBackView" />
						</eval>
						<eval name="left"
							type="de.grogra.imp3d.Camera">
							<object
								expr="de.grogra.imp3d.Camera.createLeftView" />
						</eval>
						<eval name="right"
							type="de.grogra.imp3d.Camera">
							<object
								expr="de.grogra.imp3d.Camera.createRightView" />
						</eval>
					</group>
				</resdir>
				<directory name="projections">
					<factory name="perspective"
						class="de.grogra.imp3d.PerspectiveProjection" />
					<factory name="parallel"
						class="de.grogra.imp3d.ParallelProjection" />
					<factory name="lens"
						class="de.grogra.imp3d.LensProjection" />
				</directory>
				<directory name="hfmappings">
					<factory name="rectangular"
						class="de.grogra.imp3d.objects.RectangularHeightFieldMapping" />
					<factory name="spherical"
						class="de.grogra.imp3d.objects.SphericalHeightFieldMapping" />
				</directory>
				<directory name="lights">
					<factory name="point"
						class="de.grogra.imp3d.objects.PointLight" />
					<factory name="spot"
						class="de.grogra.imp3d.objects.SpotLight" />
					<factory name="directional"
						class="de.grogra.imp3d.objects.DirectionalLight" />
					<link source="../shaders"/>
				</directory>
				<directory name="arealights">
					<eval name="&quot;null&quot;"
						type="de.grogra.imp3d.objects.AreaLight" />
					<factory name="area"
						class="de.grogra.imp3d.objects.AreaLight" />
				</directory>
			</directory>
		</ref>
		<ref name="cmdline">
		  <command name="render" run="de.grogra.imp3d.ray2.Raytracer.render"/>
		</ref>
		<ref name="ui">
			<ref name="editors">
				<directory name="3d">
					<poly name="cam" type="de.grogra.imp3d.Camera.$TYPE"
						directory="/objects/3d/cameras" />
					<composite name="camera"
						type="de.grogra.imp3d.Camera.$TYPE"
						fields="{projection,minZ,maxZ,transformation}">
						<button name="*fit"
							type="de.grogra.imp3d.Camera.$TYPE">
							<command
								run="de.grogra.imp3d.IMP3D.fitCamera" />
						</button>
					</composite>
					<poly name="projection"
						type="de.grogra.imp3d.Projection"
						directory="/objects/3d/projections" />
					<composite name="parallel"
						type="de.grogra.imp3d.ParallelProjection.$TYPE"
						fields="{width,aspect}" />
					<composite name="perspective"
						type="de.grogra.imp3d.PerspectiveProjection.$TYPE"
						fields="{fieldOfView,aspect}" />
					<composite name="lens"
						type="de.grogra.imp3d.LensProjection.$TYPE" inherit="true"
						fields="{focalLength,fStop,subjectDistance}" />

					<poly name="shader"
						type="de.grogra.imp3d.shading.Shader"
						directory="/objects/3d/shaders" />
					<composite name="sideswitch"
						type="de.grogra.imp3d.shading.SideSwitchShader.$TYPE"
						fields="{frontShader,backShader}" />
					<composite name="algorithmswitch"
						type="de.grogra.imp3d.shading.AlgorithmSwitchShader.$TYPE"
						fields="{guiShader,raytracerShader,radiationShader}" />
					<composite name="channelmap"
						type="de.grogra.imp3d.shading.ChannelMapNode.$TYPE"
						fields="{input}" />
					<composite name="phong"
						type="de.grogra.imp3d.shading.Phong.$TYPE"
						fields="{diffuse,specular,shininess,transparency,transparencyShininess,interpolatedTransparency,diffuseTransparency,ambient,emissive}"
						inherit="true" />
					<composite name="sunsky"
						type="de.grogra.imp3d.shading.SunSkyLight.$TYPE"
						fields="{sun,turbidity,radianceFactor,disableLight,disableSun}"
						inherit="true" />

					<poly name="interior"
						type="de.grogra.imp3d.shading.Interior"
						directory="/objects/3d/interiors" />
					<composite name="ior"
						type="de.grogra.imp3d.shading.IOR.$TYPE"
						fields="{indexOfRefraction}" />

					<composite name="checker"
						type="de.grogra.imp3d.shading.Checker.$TYPE"
						fields="{color1,color2}" inherit="true" />
					<composite name="volchecker"
						type="de.grogra.imp3d.shading.VolumeChecker.$TYPE"
						fields="{color1,color2}" inherit="true" />
					<composite name="image"
						type="de.grogra.imp3d.shading.ImageMap.$TYPE" fields="{image,bilinearFiltering}"
						inherit="true" />
					<composite name="uv"
						type="de.grogra.imp3d.shading.AffineUVTransformation.$TYPE"
						fields="{offsetU,offsetV,scaleU,scaleV,angle,shear}"
						inherit="true" />
					<composite name="xyz"
						type="de.grogra.imp3d.shading.XYZTransformation.$TYPE"
						fields="{transform,useGlobal}" inherit="true" />
					<composite name="bump"
						type="de.grogra.imp3d.shading.BumpMap.$TYPE"
						fields="{displacement,strength}" inherit="true" />
					<composite name="wave"
						type="de.grogra.imp3d.shading.WaveMap.$TYPE"
						fields="{amplitude,uCount,vCount,boxTop}" inherit="true" />
					<composite name="volumefunction"
						type="de.grogra.imp3d.shading.VolumeFunction.$TYPE"
						fields="{frequency,phase,waveForm}" inherit="true" />
					<composite name="laplace3d"
						type="de.grogra.imp3d.shading.Laplace3D.$TYPE" fields="{sx,sy,sz}"
						inherit="true" />
					<composite name="smooth3d"
						type="de.grogra.imp3d.shading.Smooth3D.$TYPE" fields="{sx,sy,sz}"
						inherit="true" />
					<composite name="carpenter"
						type="de.grogra.imp3d.shading.Carpenter.$TYPE"
						fields="{width,height,color,roughness,noise,seed}" inherit="true" />
					<composite name="gradient"
						type="de.grogra.imp3d.shading.Gradient.$TYPE" fields="{direction}"
						inherit="true" />
					<composite name="turbulence"
						type="de.grogra.imp3d.shading.Turbulence.$TYPE"
						fields="{amount,octaves,noiseRatio,frequencyRatio}"
						inherit="true" />
					<composite name="granite"
						type="de.grogra.imp3d.shading.Granite.$TYPE" inherit="true" />
					<composite name="volturbulence"
						type="de.grogra.imp3d.shading.VolumeTurbulence.$TYPE"
						fields="{size,octaves,noiseRatio,frequencyRatio}"
						inherit="true" />
					<composite name="leopard"
						type="de.grogra.imp3d.shading.Leopard.$TYPE" inherit="true" />
					<composite name="mandel"
						type="de.grogra.imp3d.shading.Mandel.$TYPE" fields="{iterations}"
						inherit="true" />
					<composite name="julia"
						type="de.grogra.imp3d.shading.Julia.$TYPE"
						fields="{iterations,cx,cy}" inherit="true" />
					<composite name="wood"
						type="de.grogra.imp3d.shading.Wood.$TYPE" inherit="true" />
					<composite name="blend"
						type="de.grogra.imp3d.shading.ChannelBlend.$TYPE" fields="{blend}"
						inherit="true" />
					<poly name="blenditem0"
						type="de.grogra.imp3d.shading.BlendItem.$TYPE"
						directory="/objects/maps" />
					<composite name="blenditem"
						type="de.grogra.imp3d.shading.BlendItem.$TYPE"
						fields="{input,value,next}" />

					<directory name="heightfield">
						<composite name="image"
							type="de.grogra.imp3d.objects.ImageHeightField.$TYPE"
							fields="{image,mapping}" />
						<composite name="network"
							type="de.grogra.imp3d.objects.NetworkHeightField.$TYPE"
							fields="{height,xSize,ySize,mapping}" />
						<poly name="mapping"
							type="de.grogra.imp3d.objects.HeightFieldMapping"
							directory="/objects/3d/hfmappings" />
						<composite name="spherical"
							type="de.grogra.imp3d.objects.SphericalHeightFieldMapping.$TYPE"
							fields="{latitude,longitude,latWidth,longWidth,radius,scale,horizontal}" />
						<composite name="rectangular"
							type="de.grogra.imp3d.objects.RectangularHeightFieldMapping.$TYPE"
							fields="{xWidth,yWidth,scale,zeroLevel,water}" />
					</directory>

					<composite name="sequence"
						type="de.grogra.imp3d.objects.Sequence.$TYPE"
						fields="{name,path}" />
					<composite name="vertexseq"
						type="de.grogra.imp3d.objects.VertexSequence.$TYPE"
						fields="{hermite,tangentLength,periodic}" inherit="true" />
					<composite name="sweepseq"
						type="de.grogra.imp3d.objects.SweepSequence.$TYPE"
						fields="{name,path,useRail,hermite,tangentLength}" />

					<poly name="light"
						type="de.grogra.imp3d.shading.Light"
						directory="/objects/3d/lights" />
					<composite name="lightbase"
						type="de.grogra.imp3d.objects.LightBase.$TYPE"
						fields="{color,shadowless,visualize,numberofrays,raylength}" />
					<composite name="pointlight"
						type="de.grogra.imp3d.objects.PointLight.$TYPE"
						fields="{type,power,attenuationExponent,attenuationDistance}"
						inherit="true" />
					<composite name="spotlight"
						type="de.grogra.imp3d.objects.SpotLight.$TYPE"
						fields="{innerAngle,outerAngle}" inherit="true" />
					<composite name="directionallight"
						type="de.grogra.imp3d.objects.DirectionalLight.$TYPE"
						fields="{powerDensity}" inherit="true" />

					<poly name="arealight"
						type="de.grogra.imp3d.objects.AreaLight"
						directory="/objects/3d/arealights" />
					<composite name="alight"
						type="de.grogra.imp3d.objects.AreaLight.$TYPE"
						fields="{power,exponent,shadowless,ignoredWhenHit}"
                        inherit="true" />

				</directory>
			</ref>
			<ref name="panels">
				<directory name="3d">
					<panel name="view" hidden="true">
						<object expr="de.grogra.imp.View.create">
							<object expr="de.grogra.imp3d.View3D" />
							<var name="context" />
							<vars />
						</object>
						<directory name="menu">
							<directory name="src">
								<directory name="view">
									<directory name="viewcomponents">
										<link
											source="/ui/viewcomponent3dselection" />
									</directory>
									<selectable name="layers"
										expr="de.grogra.imp.View.getSelectableLayers">
										<var name="context" />
									</selectable>
									<panel name="Scales">
          								<exists name=".available" ref="/project" />
          									<object expr="de.grogra.imp.ScaleVisibilityPanel.createScaleVisibilityPanel">
      	  									<var name="context" />
      	  									<vars />
      	  									</object>
        							</panel>
									<link source="/ui/commands/export" />
									<link
										source="/ui/commands/snapshot" />
								</directory>
								<selectable name="camera"
									expr="de.grogra.imp3d.View3D.getSelectableCamera">
									<var name="context" />
								</selectable>
                                <directory name="fit">
                                    <command name="fitCamera" run="de.grogra.imp3d.IMP3D.fitCamera"/>
                                </directory>
								<directory name="render">
									<link source="/renderers/3d" />
									<directory name="tofile">
                                      <command name=".renderToFile" run="de.grogra.imp.View.renderToFile"/>
									  <link source="/renderers/3d" />
									</directory>
									<command name="stop"
										run="de.grogra.imp.View.disposeRenderer" />
								</directory>
								<separator fill="true" />
								<command name="move" motion="true"
									plugin="true" />
								<command name="dolly" motion="true"
									plugin="true" />
								<command name="rotate" motion="true"
									plugin="true" />
								<command name="zoom" motion="true"
									plugin="true" />
							</directory>
							<directory name="xf">
								<object
									class="de.grogra.imp.registry.AddViewComponentMenu" />
							</directory>
						</directory>
					</panel>
					<panel name="defaultview" source="view">
						<exists name=".available" ref="/project" />
					</panel>
					<toolbar name="toolbar">
						<exists name=".available" ref="/project" />
						<directory name="menu">
							<directory name="src">
								<link source="/objects/3d/geometry" />
								<link source="/ui/tools/3d" />
							</directory>
						</directory>
					</toolbar>
				</directory>
			</ref>
			<ref name="layouts">
				<layout name="standard3d">
					<exists name=".available" ref="/project" />
					<main>
						<split orientation="horizontal">
							<split orientation="vertical"
								location="0.8">
								<split orientation="vertical">
									<link
										source="/ui/panels/3d/toolbar" />
									<link
										source="/ui/panels/3d/defaultview" />
								</split>
								<split orientation="vertical">
									<tab>
										<link
											source="/ui/panels/fileexplorer" />
										<link
											source="/ui/panels/objects/images" />
										<link
											source="/ui/panels/objects/3d/shaders" />
									</tab>
									<link source="/ui/panels/statusbar" />
								</split>
							</split>
							<link source="/ui/panels/attributeeditor" />
						</split>
					</main>
				</layout>
			</ref>
			<ref name="tools">
				<choicegroup name="3d"
					declaring="de.grogra.imp3d.View3D">
					<tool name="translate"
						tools="{de.grogra.imp3d.edit.Translate}" />
					<tool name="rotate"
						tools="{de.grogra.imp3d.edit.Rotate}" />
					<tool name="scale"
						tools="{de.grogra.imp3d.edit.Scale}" />
				</choicegroup>
			</ref>
			<ref name="iconthemes">
				<eval name="3d">
					<object
						expr="de.grogra.icon.ScaledIconTheme.readFromDirectory">
						<string value="icontheme" />
						<resource name="icons" />
						<string value=".png" />
					</object>
				</eval>
			</ref>
			<choicegroup name="viewcomponent3dselection"
				declaring="de.grogra.imp3d.View3D" option="true"
				elements="{{component,de.grogra.imp.registry.ViewComponentFactory}}">
				<component name="wireframe"
					class="de.grogra.imp3d.WireframeCanvas"
					ui="de.grogra.pf.ui.awt.AWTToolkitBase">
					<directory name="menu">
					    <command name="eps" run="de.grogra.imp.awt.CanvasAdapter.writeEPS"/>
						<selectable name="options"
							expr="de.grogra.imp.View.getViewComponent">
							<var name="context" />
						</selectable>
					</directory>
					<option name="lod"
						type="de.grogra.imp.View.LOD_TYPE" value="2" />
					<option name="showPoints" type="java.lang.Boolean"
						value="true" />
					<option name="lineWidth" type="java.lang.Float"
						value="1" />
					<option name="antialiasing" type="java.lang.Boolean"
						value="false" />
					<option name="showGrid" type="java.lang.Boolean"
						value="false" />
					<option name="gridDimension" type="java.lang.Integer"
						value="5" />
					<option name="gridSpacing" type="java.lang.Float"
						value="1.0f" />
					<option name="gridColorR" type="java.lang.Float"
						value="1.0f" />
					<option name="gridColorG" type="java.lang.Float"
						value="1.0f" />
					<option name="gridColorB" type="java.lang.Float"
						value="1.0f" />
					<option name="backgroundColorR" type="java.lang.Float" value="0.8f" />
					<option name="backgroundColorG" type="java.lang.Float" value="0.8f" />
					<option name="backgroundColorB" type="java.lang.Float" value="0.8f" />
					<option name="backgroundAlpha" type="java.lang.Float" value="1.0f" />
					<option name="showAxes" type="java.lang.Boolean" value="false" />
					<option name="showAxesNames" type="java.lang.Boolean" value="false" />
					<option name="showDisplaySize" type="java.lang.Boolean" value="false" />
					<!-- 
					<option name="showPreView1" type="de.grogra.imp.View.VIEW_PREVIEW1_TYPE" value="0" />
					<option name="showPreView2" type="de.grogra.imp.View.VIEW_PREVIEW2_TYPE" value="0" />
					<option name="splitViewSize" type="java.lang.Float" value="0.33f" />  
					<option name="stereoView" type="java.lang.Boolean" value="false" />
					<option name="stereoMode" type="de.grogra.imp.View.STEREO_VIEW_TYPE" value="0" />
					<option name="anaglyphView" type="java.lang.Boolean" value="false" />
					<option name="anaglyphMode" type="de.grogra.imp.View.ANAGLYPH_VIEW_TYPE" value="0" />
					<option name="eyeSeparation" type="java.lang.Float" value="0.035f" />
					-->
				</component>
				<component name="gl"
					class="de.grogra.imp3d.gl.GLDisplay"
					ui="de.grogra.pf.ui.awt.AWTToolkitBase">
					<directory name="menu">
						<selectable name="options"
							expr="de.grogra.imp.View.getViewComponent">
							<var name="context" />
						</selectable>
					</directory>
					<option name="lod"
						type="de.grogra.imp.View.LOD_TYPE" value="2" />
					<option name="lighting" type="java.lang.Boolean"
						value="true" />
					<option name="showPoints" type="java.lang.Boolean"
						value="true" />
					<option name="showGrid" type="java.lang.Boolean"
						value="false" />
					<option name="renderAsWireframe" type="java.lang.Boolean"
						value="false" />
					<option name="gridDimension" type="java.lang.Integer"
						value="5" />
					<option name="gridSpacing" type="java.lang.Float"
						value="1.0f" />
					<option name="gridColorR" type="java.lang.Float"
						value="1.0f" />
					<option name="gridColorG" type="java.lang.Float"
						value="1.0f" />
					<option name="gridColorB" type="java.lang.Float"
						value="1.0f" />
					<option name="backgroundColorR" type="java.lang.Float" value="0.8f" />
					<option name="backgroundColorG" type="java.lang.Float" value="0.8f" />
					<option name="backgroundColorB" type="java.lang.Float" value="0.8f" />
					<option name="backgroundAlpha" type="java.lang.Float" value="1.0f" />
					<option name="showAxes" type="java.lang.Boolean"
						value="false" />
					<option name="showAxesNames" type="java.lang.Boolean"
						value="false" />
                    <option name="showDisplaySize" type="java.lang.Boolean"
                        value="false" />
					<!--          <option name="mode" type="de.grogra.imp3d.gl.GLDisplay.RENDER_MODE" value="0"/> -->
				</component>
			<!-- OpenGL (GLSL) starts here -->
				<component name="glsl"
					class="de.grogra.imp3d.glsl.GLSLDisplay"
					ui="de.grogra.pf.ui.awt.AWTToolkitBase">
					<directory name="menu">
						<selectable name="options"
							expr="de.grogra.imp.View.getViewComponent">
							<var name="context" />
						</selectable>
					</directory>
					<option name="lod"
						type="de.grogra.imp.View.LOD_TYPE" value="2" />
					<option name="showPoints" type="java.lang.Boolean"
						value="true" />
					<option name="showGrid" type="java.lang.Boolean"
						value="false" />
					<option name="renderAsWireframe" type="java.lang.Boolean"
						value="false" />
					<option name="gridDimension" type="java.lang.Integer"
						value="5" />
					<option name="gridSpacing" type="java.lang.Float"
						value="1.0f" />
					<option name="gridColorR" type="java.lang.Float"
						value="1.0f" />
					<option name="gridColorG" type="java.lang.Float"
						value="1.0f" />
					<option name="gridColorB" type="java.lang.Float"
						value="1.0f" />
					<option name="backgroundColorR" type="java.lang.Float" value="0.8f" />
					<option name="backgroundColorG" type="java.lang.Float" value="0.8f" />
					<option name="backgroundColorB" type="java.lang.Float" value="0.8f" />
					<option name="backgroundAlpha" type="java.lang.Float" value="1.0f" />
					<option name="showBGImage" type="java.lang.Boolean" value="true" />
					<option name="showAxes" type="java.lang.Boolean"
						value="false" />
					<option name="showAxesNames" type="java.lang.Boolean"
						value="false" />
                    <option name="showDisplaySize" type="java.lang.Boolean"
                        value="false" />				
					<option name="lighting" type="java.lang.Boolean"
						value="true" />
					<option name="physicalLighting" type="java.lang.Boolean"
						value="false" />
                    <option name="showShadows" type="java.lang.Boolean"
                        value="true" />				
                    <option name="showSky" type="java.lang.Boolean"
                        value="true" />				
					<option name="diffuseSkyLight" type="java.lang.Boolean"
						value="false" />
					<option name="brightness" type="java.lang.Float"
						value="1.0f" />
					<option name="autoAdjustBrightness" type="java.lang.Boolean"
						value="true" />
					<option name="tonemapping"
						type="de.grogra.imp3d.glsl.GLSLDisplay.TONEMAPPING_TYPE" value="0" />
<!--					<option name="edgeFiltering" type="java.lang.Boolean"
						value="false" />
-->					<option name="shaderAntialiasing" type="java.lang.Boolean"
						value="false" />
					<option name="altDrawing" type="java.lang.Boolean"
						value="false" />
                    <option name="maxDepth" type="java.lang.Integer"
                        value="4" />				
<!--                <option name="debugRenderPass" type="java.lang.Integer"
                        value="0" />   -->
                    </component>
				<!-- GLDisplay20 starts here -->
<!--				<component name="gl20"
					class="de.grogra.imp3d.gl20.GL20Display"
					ui="de.grogra.pf.ui.awt.AWTToolkitBase">
					<directory name="menu">
						<command name="debugInfo" run="de.grogra.imp3d.gl20.GLDisplay20.SwitchDebug" />
						<selectable name="options"
							expr="de.grogra.imp.View.getViewComponent">
							<var name="context" />
						</selectable>
					</directory>
					<option name="lod"
						type="de.grogra.imp.View.LOD_TYPE" value="2" />
					<option name="lighting" type="java.lang.Boolean"
						value="true" />
					<option name="showPoints" type="java.lang.Boolean"
						value="true" />
				</component> -->
				<!-- GLDisplay20 ends here -->
			</choicegroup>
		</ref>
		<ref name="renderers">
			<group name="3d">

<!--				<object name="ray"
					expr="de.grogra.imp3d.ray.Renderer">
					<var name="item" />
					<option name="antialiasing"
						type="de.grogra.imp3d.ray.GroIMPRaytracer.ANTIALIASING_MODE"
						value="0" />
					<option name="intersection"
						type="de.grogra.imp3d.ray.GroIMPRaytracer.INTERSECTION_MODE"
						value="1" />
					<option name="raytracing"
						type="de.grogra.imp3d.ray.GroIMPRaytracer.RAYTRACING_MODE"
						value="0" />
					<option name="raytracing_depth"
						type="java.lang.Integer" value="8" />
					<option name="priority"
						type="de.grogra.imp3d.ray.GroIMPRaytracer.PRIORITY_MODE"
						value="2" />
					<optiongroup name="pathtracing">
						<option name="count" type="java.lang.Integer"
							value="20" />
					</optiongroup>
					<optiongroup name="photon">
						<option name="count" type="java.lang.Integer"
							value="100000" />
						<option name="range" type="java.lang.Integer"
							value="50" />
					</optiongroup>
					<optiongroup name="debug">
						<option name="debugRaytracer"
							type="java.lang.Boolean" value="false" />
						<option name="markPixel"
							type="java.lang.Boolean" value="true" />
						<option name="x" type="java.lang.Integer"
							value="250" />
						<option name="y" type="java.lang.Integer"
							value="150" />
					</optiongroup>
					<optiongroup name="brightness">
						<option name="scaleFactor"
							type="java.lang.Float" value="0.2f" />
					</optiongroup>
				</object>  -->

				<object name="ray2"
					expr="de.grogra.imp3d.ray2.Raytracer">
					<var name="item" />
					<option name="threadcount" type="java.lang.Integer"
						value="0" />
					<option name="hdr"
						type="java.lang.Boolean" value="true" />
					<option name="brightness" type="java.lang.Float"
						value="0.1" />
					<option name="autoadjust" type="java.lang.Boolean"
						value="true" />
					<option name="autoadjustmaxvalue" type="java.lang.Float"
						value="1" />
					<option name="removeoutliers" type="java.lang.Boolean"
						value="true" />
					<option name="rayprocessor"
						type="de.grogra.imp3d.ray2.Raytracer.RAYPROCESSOR"
						value="de.grogra.ray2.tracing.DefaultRayProcessor" />
					<option name="rayprocessor.depth"
						type="java.lang.Integer" value="5" />
					<option name="pathtracer.brightness"
						type="java.lang.Float" value="200" />
					<option name="antialiasing"
						type="de.grogra.imp3d.ray2.Raytracer.ANTIALIASING"
						value="de.grogra.ray2.antialiasing.NoAntialiasing" />
					<option name="stochasticsupersampling.gridsize"
						type="java.lang.Integer" value="3" />
					<option name="flatness" type="java.lang.Float"
						value="1" />
					<option name="seed" type="java.lang.Long"
						value="0" />
					<optiongroup name="photonmapping">
						<option name="globalcount" type="java.lang.Integer"
							value="200000" />
						<option name="causticcount" type="java.lang.Integer"
							value="100000" />							
<!-- 						<option name="range" type="java.lang.Integer"
							value="50" />  -->
						<option name="area" type="java.lang.Double"
							value="0.08" />
						<option name="depth" type="java.lang.Integer"
							value="5" />							
					</optiongroup>
					<optiongroup name="BidirectionalPathTracer">
						<option name="eyeDepth" type="java.lang.Integer"
							value="10" />
						<option name="lightDepth" type="java.lang.Integer"
							value="10" />	
						<option name="heuristicFactor" type="java.lang.Integer"
							value="2" />
					</optiongroup>
					<optiongroup name="MetropolisPathTracer">
				<!--		<option name="initialCount" type="java.lang.Integer"
							value="10000" /> -->
						<option name="seedCount" type="java.lang.Integer"
							value="100" />	
						<option name="mutationPPCount" type="java.lang.Integer"
							value="100" />
				<!--		<option name="correctionFactor" type="java.lang.Float"
							value="1" />
						<option name="testFlag" type="java.lang.Boolean"
							value="true" />	 -->
						<optiongroup name="Strategies">	
							<option name="BidirectionalStrat" type="java.lang.Boolean"
							value="true" />
							<option name="LensSubpathStrat" type="java.lang.Boolean"
							value="true" />
							<option name="LensPerturbStrat" type="java.lang.Boolean"
							value="true" />
							<option name="CausticPerturbStrat" type="java.lang.Boolean"
							value="true" />
						</optiongroup>
				<!--		<optiongroup name="Refinement">
							<option name="ExpectedValuesRefinement" type="java.lang.Boolean"
							value="true" />
							<option name="DirectLightingRefinement" type="java.lang.Boolean"
							value="true" />
							<option name="ImportanceRefinement" type="java.lang.Boolean"
							value="true" />
							<option name="TwoStageRefinement" type="java.lang.Boolean"
							value="true" />
							<option name="testimageMutationPerPixel" type="java.lang.Integer"
							value="30" />
							<option name="testimageCorrectionFactor" type="java.lang.Float"
							value="2" />
						</optiongroup>	
						-->							
					</optiongroup>						
					<optiongroup name="radiosity">
						<option name="hemisize" type="java.lang.Integer" value="100" />
<!--						<option name="maxpatcharea" type="java.lang.Float" value="0.5" />   -->
						<option name="hemicubeworldwide" type="java.lang.Float" value="1.0" />
						<option name="subdivthreshold" type="java.lang.Float" value="5.0" />
						<option name="maxsubdivdepth" type="java.lang.Integer" value="5" />
					</optiongroup>
				</object>
			</group>
		</ref>
		<ref name="io">
			<ref name="filetypes">
				<!--
                <ext name="x3d" extensions="{.x3d}"
					mimeType="model/x3d+xml" />
                -->
                <!-- disabled because of bug #3185621
				<ext name="vrml97" extensions="{.wrl}"
					mimeType="model/vrml" />
				<ext name="classicvrml" extensions="{.x3dv}"
					mimeType="model/x3d+vrml" />
				-->
			</ref>
		</ref>
		<ref name="hooks">
			<ref name="complete">
				<hook name="3d">
					<exists ref="/project" />
					<insert target="/workbench/layouts"
						resolveLinks="false">
						<link source="/ui/layouts/standard3d" />
					</insert>
					<insert target="/workbench/menu/src"
						resolveLinks="false">
						<directory name="objects">
							<link source="/objects/3d/geometry" />
						</directory>
					</insert>
				</hook>
			</ref>
		</ref>
	</registry>
</plugin>
